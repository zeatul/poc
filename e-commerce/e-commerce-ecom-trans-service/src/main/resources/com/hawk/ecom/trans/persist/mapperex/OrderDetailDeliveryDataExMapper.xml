<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hawk.ecom.trans.persist.mapperex.OrderDetailDeliveryDataExMapper">


	
	<update id="updateOrderDeliveryDataForNotification" parameterType="hashmap">
		UPDATE t_tra_order_detail_delivery_data
		SET delivery_status = #{deliveryStatus},
		<if test="outerOrderCode != null"> outer_order_code = #{outerOrderCode},  </if>
		outer_order_status = #{outerOrderStatus} ,
		outer_order_msg = #{outerOrderMsg},
		update_date = now()
		WHERE task_code = #{taskCode}
	</update>
	
	<select id="loadOrderDeliveryDataByTaskCode" resultType="OrderDetailDeliveryDataExDomain">
		SELECT order_detail_id AS "orderDetailId" ,
		order_detail_status AS "orderDetailStatus" ,
		order_id AS "orderId" 
		FROM t_tra_order_detail_delivery_data
		WHERE task_code = #{taskCode}
	</select>
</mapper>